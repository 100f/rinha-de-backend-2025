
 Network joao-xavier_default  Creating
 Network joao-xavier_default  Created
 Volume "joao-xavier_uds"  Creating
 Volume "joao-xavier_uds"  Created
 Container joao-xavier-worker-1  Creating
 Container joao-xavier-worker-1  Created
 Container joao-xavier-api_1-1  Creating
 Container joao-xavier-api_0-1  Creating
 Container joao-xavier-api_0-1  Created
 Container joao-xavier-api_1-1  Created
 Container joao-xavier-lb-1  Creating
 Container joao-xavier-lb-1  Created
Attaching to api_0-1, api_1-1, lb-1, worker-1
worker-1  | 2025-08-08T21:15:16.758632Z  INFO ThreadId(01) src/worker/mod.rs:25: starting worker
worker-1  | 2025-08-08T21:15:16.758659Z  INFO ThreadId(01) src/worker/mod.rs:37: starting payment_req_consumer
worker-1  | 2025-08-08T21:15:16.758791Z  INFO ThreadId(01) src/worker/mod.rs:72: listening on /var/run/worker.socket
api_1-1   | 2025-08-08T21:15:17.071154Z  INFO ThreadId(01) src/api/mod.rs:20: starting API
api_1-1   | 2025-08-08T21:15:17.071287Z  INFO ThreadId(01) src/api/mod.rs:27: binded to unix socket on /var/run/api1.sock
api_0-1   | 2025-08-08T21:15:17.100480Z  INFO ThreadId(01) src/api/mod.rs:20: starting API
api_0-1   | 2025-08-08T21:15:17.100597Z  INFO ThreadId(01) src/api/mod.rs:27: binded to unix socket on /var/run/api0.sock
lb-1      | 2025-08-08T21:15:17.356476Z  INFO ThreadId(01) src/lb.rs:45: starting lb on port 9999
lb-1      | 2025-08-08T21:15:17.356518Z  INFO ThreadId(01) src/lb.rs:49: api instances ["/var/run/api0.sock", "/var/run/api1.sock"]
lb-1      | 2025-08-08T21:15:17.356528Z  INFO ThreadId(01) src/lb.rs:53: allocating 1024 512B buffers
worker-1  | 2025-08-08T21:15:26.088692Z  INFO ThreadId(01) src/worker/mod.rs:116: db purged
worker-1  | =================================== Metrics ====================================
worker-1  | 
worker-1  | Key        Kind      Value                                                          Units 𝚫 Delta                                                              | Description                 | Labels
worker-1  | --------------------------------------------------------------------------------
worker-1  | db.insert  Histogram [p50=1184.054705787518, p99=1903.9767805208119, max=13941]#177 ns    𝚫 [p50=+1184.054705787518, p99=+1903.9767805208119, max=+13941]#+177 | db insert time              | 
worker-1  | db.select  Histogram [p50=2618.8747538436346, p99=2618.8747538436346, max=5321]#2   ns    𝚫 [p50=+2618.8747538436346, p99=+2618.8747538436346, max=+5321]#+2   | db query time               | 
worker-1  | pp_http    Histogram [p50=788.0015187720084, p99=1143.1009938572206, max=4649]#177  μs    𝚫 [p50=+788.0015187720084, p99=+1143.1009938572206, max=+4649]#+177  | payment processor http time | 
worker-1  | uds.handle Histogram [p50=11.999920242205052, p99=84.00699000863219, max=3159]#180  μs    𝚫 [p50=+11.999920242205052, p99=+84.00699000863219, max=+3159]#+180  | http handler time           | 
worker-1  | 
worker-1  | ================================ After 15.000 s ================================
worker-1  | 
api_1-1   | =================================== Metrics ====================================
api_1-1   | 
api_1-1   | Key       Kind      Value Units 𝚫 Delta                | Description | Labels
api_1-1   | --------------------------------------------------------------------------------
api_1-1   | http.conn Counter   29    N/A   𝚫 1.9333248076287084/s | N/A         | 
api_1-1   | http.req  Counter   99    N/A   𝚫 6.599970895008349/s  | N/A         | 
api_1-1   | 
api_1-1   | ================================ After 15.000 s ================================
api_1-1   | 
api_0-1   | =================================== Metrics ====================================
api_0-1   | 
api_0-1   | Key       Kind      Value Units 𝚫 Delta                | Description | Labels
api_0-1   | --------------------------------------------------------------------------------
api_0-1   | http.conn Counter   30    N/A   𝚫 1.9999897419192811/s | N/A         | 
api_0-1   | http.req  Counter   100   N/A   𝚫 6.66663247306427/s   | N/A         | 
api_0-1   | 
api_0-1   | ================================ After 15.000 s ================================
api_0-1   | 
lb-1      | =================================== Metrics ====================================
lb-1      | 
lb-1      | Key       Kind      Value                                                        Units 𝚫 Delta                                                            | Description       | Labels
lb-1      | --------------------------------------------------------------------------------
lb-1      | http.get  Histogram [p50=2952.1825452619096, p99=2952.1825452619096, max=3479]#2 μs    𝚫 [p50=+2952.1825452619096, p99=+2952.1825452619096, max=+3479]#+2 | http handler time | 
lb-1      | http.post Histogram [p50=40.9970456740797, p99=74.00258383967807, max=90]#213    μs    𝚫 [p50=+40.9970456740797, p99=+74.00258383967807, max=+90]#+213    | http handler time | 
lb-1      | 
lb-1      | ================================ After 15.000 s ================================
lb-1      | 
worker-1  | =================================== Metrics ====================================
worker-1  | 
worker-1  | Key        Kind      Value                                                           Units 𝚫 Delta                                                               | Description                 | Labels
worker-1  | --------------------------------------------------------------------------------
worker-1  | db.insert  Histogram [p50=1155.0512779990072, p99=2160.943088842382, max=14129]#704  ns    𝚫 [p50=-29.003427788510862, p99=+256.9663083215703, max=+188]#+527    | db insert time              | 
worker-1  | db.select  Histogram [p50=3378.2058099597757, p99=5321.444263524756, max=5661]#4     ns    𝚫 [p50=+759.3310561161411, p99=+2702.5695096811214, max=+340]#+2      | db query time               | 
worker-1  | pp_http    Histogram [p50=797.9931530488128, p99=101630.60849097042, max=101841]#718 μs    𝚫 [p50=+9.991634276804461, p99=+100487.5074971132, max=+97192]#+541   | payment processor http time | 
worker-1  | uds.handle Histogram [p50=33.43154805432531, p99=45.00168833801188, max=23455]#2064  μs    𝚫 [p50=+21.43162781212026, p99=-39.005301670620305, max=+20296]#+1884 | http handler time           | 
worker-1  | 
worker-1  | ================================ After 15.000 s ================================
worker-1  | 
api_1-1   | =================================== Metrics ====================================
api_1-1   | 
api_1-1   | Key       Kind      Value Units 𝚫 Delta               | Description | Labels
api_1-1   | --------------------------------------------------------------------------------
api_1-1   | http.conn Counter   97    N/A   𝚫 4.533313842803798/s | N/A         | 
api_1-1   | http.req  Counter   1064  N/A   𝚫 64.33305673978919/s | N/A         | 
api_1-1   | 
api_1-1   | ================================ After 15.000 s ================================
api_1-1   | 
api_0-1   | =================================== Metrics ====================================
api_0-1   | 
api_0-1   | Key       Kind      Value Units 𝚫 Delta               | Description | Labels
api_0-1   | --------------------------------------------------------------------------------
api_0-1   | http.conn Counter   98    N/A   𝚫 4.533314445429807/s | N/A         | 
api_0-1   | http.req  Counter   1062  N/A   𝚫 64.13306612505109/s | N/A         | 
api_0-1   | 
api_0-1   | ================================ After 15.000 s ================================
api_0-1   | 
lb-1      | =================================== Metrics ====================================
lb-1      | 
lb-1      | Key       Kind      Value                                                        Units 𝚫 Delta                                                           | Description       | Labels
lb-1      | --------------------------------------------------------------------------------
lb-1      | http.get  Histogram [p50=2952.1825452619096, p99=3478.9994678164558, max=3714]#4 μs    𝚫 [p50=+0, p99=+526.8169225545462, max=+235]#+2                   | http handler time | 
lb-1      | http.post Histogram [p50=46.00269619758199, p99=89.00566416071958, max=166]#2174 μs    𝚫 [p50=+5.00565052350229, p99=+15.003080321041509, max=+76]#+1961 | http handler time | 
lb-1      | 
lb-1      | ================================ After 15.000 s ================================
lb-1      | 
worker-1  | =================================== Metrics ====================================
worker-1  | 
worker-1  | Key        Kind      Value                                                             Units 𝚫 Delta                                                                | Description                 | Labels
worker-1  | --------------------------------------------------------------------------------
worker-1  | db.insert  Histogram [p50=1155.0512779990072, p99=2160.943088842382, max=14129]#704    ns    𝚫 [p50=+0, p99=+0, max=+0]#+0                                          | db insert time              | 
worker-1  | db.select  Histogram [p50=4515.630144727208, p99=5321.444263524756, max=5661]#5        ns    𝚫 [p50=+1137.4243347674324, p99=+0, max=+0]#+1                         | db query time               | 
worker-1  | pp_http    Histogram [p50=2851.2136408629763, p99=101650.93664548396, max=2000633]#910 μs    𝚫 [p50=+2053.2204878141633, p99=+20.32815451353963, max=+1898792]#+192 | payment processor http time | 
worker-1  | uds.handle Histogram [p50=33.43154805432531, p99=61.001594837159054, max=23455]#6003   μs    𝚫 [p50=+0, p99=+15.999906499147173, max=+0]#+3939                      | http handler time           | 
worker-1  | 
worker-1  | ================================ After 15.000 s ================================
worker-1  | 
api_1-1   | =================================== Metrics ====================================
api_1-1   | 
api_1-1   | Key       Kind      Value Units 𝚫 Delta                | Description | Labels
api_1-1   | --------------------------------------------------------------------------------
api_1-1   | http.conn Counter   166   N/A   𝚫 4.599971970837458/s  | N/A         | 
api_1-1   | http.req  Counter   3058  N/A   𝚫 132.93252333115782/s | N/A         | 
api_1-1   | 
api_1-1   | ================================ After 15.000 s ================================
api_1-1   | 
api_0-1   | =================================== Metrics ====================================
api_0-1   | 
api_0-1   | Key       Kind      Value Units 𝚫 Delta                | Description | Labels
api_0-1   | --------------------------------------------------------------------------------
api_0-1   | http.conn Counter   167   N/A   𝚫 4.59997335235437/s   | N/A         | 
api_0-1   | http.req  Counter   3050  N/A   𝚫 132.53256557218097/s | N/A         | 
api_0-1   | 
api_0-1   | ================================ After 15.000 s ================================
api_0-1   | 
lb-1      | =================================== Metrics ====================================
lb-1      | 
lb-1      | Key       Kind      Value                                                          Units 𝚫 Delta                                                              | Description       | Labels
lb-1      | --------------------------------------------------------------------------------
lb-1      | http.get  Histogram [p50=2952.1825452619096, p99=3478.9994678164558, max=3714]#5   μs    𝚫 [p50=+0, p99=+0, max=+0]#+1                                        | http handler time | 
lb-1      | http.post Histogram [p50=48.00475209104674, p99=165.98542977086845, max=1571]#6194 μs    𝚫 [p50=+2.0020558934647497, p99=+76.97976561014887, max=+1405]#+4020 | http handler time | 
lb-1      | 
lb-1      | ================================ After 15.000 s ================================
lb-1      | 
worker-1  | =================================== Metrics ====================================
worker-1  | 
worker-1  | Key        Kind      Value                                                              Units 𝚫 Delta                                                               | Description                 | Labels
worker-1  | --------------------------------------------------------------------------------
worker-1  | db.insert  Histogram [p50=696.9404829663148, p99=2016.8658384833168, max=24978]#4173    ns    𝚫 [p50=-458.1107950326924, p99=-144.07725035906537, max=+10849]#+3469 | db insert time              | 
worker-1  | db.select  Histogram [p50=4515.630144727208, p99=5660.684067091032, max=6973]#7         ns    𝚫 [p50=+0, p99=+339.23980356627635, max=+1312]#+2                     | db query time               | 
worker-1  | pp_http    Histogram [p50=2852.9248823743137, p99=101508.72490515238, max=2001651]#4383 μs    𝚫 [p50=+1.7112415113374482, p99=-142.21174033157877, max=+1018]#+3473 | payment processor http time | 
worker-1  | uds.handle Histogram [p50=33.43154805432531, p99=108.99478212142407, max=23455]#12000   μs    𝚫 [p50=+0, p99=+47.99318728426501, max=+0]#+5997                      | http handler time           | 
worker-1  | 
worker-1  | ================================ After 15.000 s ================================
worker-1  | 
api_1-1   | =================================== Metrics ====================================
api_1-1   | 
api_1-1   | Key       Kind      Value Units 𝚫 Delta                | Description | Labels
api_1-1   | --------------------------------------------------------------------------------
api_1-1   | http.conn Counter   235   N/A   𝚫 4.599979357439301/s  | N/A         | 
api_1-1   | http.req  Counter   6080  N/A   𝚫 201.46576258234154/s | N/A         | 
api_1-1   | 
api_1-1   | ================================ After 15.000 s ================================
api_1-1   | 
api_0-1   | =================================== Metrics ====================================
api_0-1   | 
api_0-1   | Key       Kind      Value Units 𝚫 Delta                | Description | Labels
api_0-1   | --------------------------------------------------------------------------------
api_0-1   | http.conn Counter   235   N/A   𝚫 4.533278483685867/s  | N/A         | 
api_0-1   | http.req  Counter   6069  N/A   𝚫 201.26423150364164/s | N/A         | 
api_0-1   | 
api_0-1   | ================================ After 15.000 s ================================
api_0-1   | 
lb-1      | =================================== Metrics ====================================
lb-1      | 
lb-1      | Key       Kind      Value                                                           Units 𝚫 Delta                                                         | Description       | Labels
lb-1      | --------------------------------------------------------------------------------
lb-1      | http.get  Histogram [p50=2952.1825452619096, p99=3714.1310340402383, max=4274]#7    μs    𝚫 [p50=+0, p99=+235.13156622378256, max=+560]#+2                | http handler time | 
lb-1      | http.post Histogram [p50=51.00379328554417, p99=174.98495734768213, max=1571]#12263 μs    𝚫 [p50=+2.99904119449743, p99=+8.999527576813676, max=+0]#+6069 | http handler time | 
lb-1      | 
lb-1      | ================================ After 15.000 s ================================
lb-1      | 
[Klb-1 exited with code 143
[Kapi_0-1 exited with code 143
[Kapi_1-1 exited with code 143
[Kworker-1 exited with code 143
log truncated at line 1000
