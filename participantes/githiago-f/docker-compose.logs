
 Network githiago-f_backend  Creating
 Network githiago-f_backend  Created
 Container githiago-f-payments-db-1  Creating
 Container githiago-f-payments-db-1  Created
 Container githiago-f-backend1-1  Creating
 Container githiago-f-backend2-1  Creating
 Container githiago-f-backend2-1  Created
 Container githiago-f-backend1-1  Created
 Container githiago-f-nginx-1  Creating
 Container githiago-f-nginx-1  Created
Attaching to backend1-1, backend2-1, nginx-1, payments-db-1
payments-db-1  | The files belonging to this database system will be owned by user "postgres".
payments-db-1  | This user must also own the server process.
payments-db-1  | 
payments-db-1  | The database cluster will be initialized with locale "en_US.utf8".
payments-db-1  | The default database encoding has accordingly been set to "UTF8".
payments-db-1  | The default text search configuration will be set to "english".
payments-db-1  | 
payments-db-1  | Data page checksums are disabled.
payments-db-1  | 
payments-db-1  | fixing permissions on existing directory /var/lib/postgresql/data ... ok
payments-db-1  | creating subdirectories ... ok
payments-db-1  | selecting dynamic shared memory implementation ... posix
payments-db-1  | selecting default "max_connections" ... 100
payments-db-1  | selecting default "shared_buffers" ... 128MB
payments-db-1  | selecting default time zone ... UTC
payments-db-1  | creating configuration files ... ok
backend2-1     | INFO exec -a "java" java -Xms64m -Xmx120m -XX:+UseSerialGC -XX:MaxGCPauseMillis=100 -XX:+UseStringDeduplication -XX:+UseCompressedOops -XX:+UseCompressedClassPointers -XX:+TieredCompilation -XX:TieredStopAtLevel=1 -XX:+DisableExplicitGC -XX:+ExitOnOutOfMemoryError -XX:MaxMetaspaceSize=64m -XX:CompressedClassSpaceSize=32m -XX:ReservedCodeCacheSize=32m -Dquarkus.http.io-threads=1 -Dquarkus.http.worker-threads=2 -Dquarkus.thread.pool.max-threads=4 -Djava.awt.headless=true -Djava.net.preferIPv4Stack=true -Dfile.encoding=UTF-8 -Duser.timezone=UTC -cp "." -jar /deployments/quarkus-run.jar 
backend2-1     | INFO running in /deployments
backend1-1     | INFO exec -a "java" java -Xms64m -Xmx120m -XX:+UseSerialGC -XX:MaxGCPauseMillis=100 -XX:+UseStringDeduplication -XX:+UseCompressedOops -XX:+UseCompressedClassPointers -XX:+TieredCompilation -XX:TieredStopAtLevel=1 -XX:+DisableExplicitGC -XX:+ExitOnOutOfMemoryError -XX:MaxMetaspaceSize=64m -XX:CompressedClassSpaceSize=32m -XX:ReservedCodeCacheSize=32m -Dquarkus.http.io-threads=1 -Dquarkus.http.worker-threads=2 -Dquarkus.thread.pool.max-threads=4 -Djava.awt.headless=true -Djava.net.preferIPv4Stack=true -Dfile.encoding=UTF-8 -Duser.timezone=UTC -cp "." -jar /deployments/quarkus-run.jar 
backend1-1     | INFO running in /deployments
nginx-1        | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx-1        | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx-1        | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx-1        | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx-1        | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx-1        | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx-1        | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx-1        | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx-1        | /docker-entrypoint.sh: Configuration complete; ready for start up
payments-db-1  | running bootstrap script ... ok
payments-db-1  | sh: locale: not found
payments-db-1  | 2025-08-08 20:37:35.008 UTC [35] WARNING:  no usable system locales were found
backend2-1     | __  ____  __  _____   ___  __ ____  ______ 
backend2-1     |  --/ __ \/ / / / _ | / _ \/ //_/ / / / __/ 
backend2-1     |  -/ /_/ / /_/ / __ |/ , _/ ,< / /_/ /\ \   
backend2-1     | --\___\_\____/_/ |_/_/|_/_/|_|\____/___/   
backend2-1     | 2025-08-08 20:37:34,728 WARN  [io.qua.config] (main) Unrecognized configuration key "quarkus.http.worker-threads" was provided; it will be ignored; verify that the dependency extension for this configuration is set or that you did not make a typo
backend1-1     | __  ____  __  _____   ___  __ ____  ______ 
backend1-1     |  --/ __ \/ / / / _ | / _ \/ //_/ / / / __/ 
backend1-1     |  -/ /_/ / /_/ / __ |/ , _/ ,< / /_/ /\ \   
backend1-1     | --\___\_\____/_/ |_/_/|_/_/|_|\____/___/   
backend1-1     | 2025-08-08 20:37:34,738 WARN  [io.qua.config] (main) Unrecognized configuration key "quarkus.http.worker-threads" was provided; it will be ignored; verify that the dependency extension for this configuration is set or that you did not make a typo
backend2-1     | 2025-08-08 20:37:35,434 INFO  [com.rin.inf.HealthChecker] (main) Is leader: false
backend1-1     | 2025-08-08 20:37:35,436 INFO  [com.rin.inf.HealthChecker] (main) Is leader: true
backend2-1     | 2025-08-08 20:37:35,723 INFO  [io.quarkus] (main) payment_processor 1.0.0 on JVM (powered by Quarkus 3.24.5) started in 2.409s. Listening on: http://0.0.0.0:9999
backend2-1     | 2025-08-08 20:37:35,724 INFO  [io.quarkus] (main) Profile prod activated. 
backend2-1     | 2025-08-08 20:37:35,724 INFO  [io.quarkus] (main) Installed features: [cdi, reactive-pg-client, rest, rest-client, rest-client-jackson, rest-jackson, scheduler, smallrye-context-propagation, vertx]
backend1-1     | 2025-08-08 20:37:35,735 INFO  [io.quarkus] (main) payment_processor 1.0.0 on JVM (powered by Quarkus 3.24.5) started in 2.421s. Listening on: http://0.0.0.0:9999
backend1-1     | 2025-08-08 20:37:35,736 INFO  [io.quarkus] (main) Profile prod activated. 
backend1-1     | 2025-08-08 20:37:35,736 INFO  [io.quarkus] (main) Installed features: [cdi, reactive-pg-client, rest, rest-client, rest-client-jackson, rest-jackson, scheduler, smallrye-context-propagation, vertx]
backend1-1     | 2025-08-08 20:37:36,513 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 GROUP BY service
backend1-1     | 2025-08-08 20:37:37,106 ERROR [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) Failed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: payments-db/172.20.0.2:5432
backend1-1     | Caused by: java.net.ConnectException: Connection refused
backend1-1     | 	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
backend1-1     | 	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:682)
backend1-1     | 	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
backend1-1     | 	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:336)
backend1-1     | 	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:339)
backend1-1     | 	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:784)
backend1-1     | 	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:732)
backend1-1     | 	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:658)
backend1-1     | 	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
backend1-1     | 	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998)
backend1-1     | 	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
backend1-1     | 	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
backend1-1     | 	at java.base/java.lang.Thread.run(Thread.java:1583)
backend1-1     | 
payments-db-1  | performing post-bootstrap initialization ... ok
payments-db-1  | initdb: warning: enabling "trust" authentication for local connections
payments-db-1  | initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.
payments-db-1  | syncing data to disk ... ok
payments-db-1  | 
payments-db-1  | 
payments-db-1  | Success. You can now start the database server using:
payments-db-1  | 
payments-db-1  |     pg_ctl -D /var/lib/postgresql/data -l logfile start
payments-db-1  | 
payments-db-1  | waiting for server to start....2025-08-08 20:37:38.027 GMT [47] LOG:  starting PostgreSQL 17.5 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
payments-db-1  | 2025-08-08 20:37:38.034 GMT [47] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
payments-db-1  | 2025-08-08 20:37:38.059 GMT [50] LOG:  database system was shut down at 2025-08-08 20:37:37 GMT
payments-db-1  | 2025-08-08 20:37:38.110 GMT [47] LOG:  database system is ready to accept connections
payments-db-1  |  done
payments-db-1  | server started
payments-db-1  | CREATE DATABASE
payments-db-1  | 
payments-db-1  | 
payments-db-1  | /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql
payments-db-1  | CREATE TYPE
payments-db-1  | CREATE TABLE
payments-db-1  | CREATE INDEX
payments-db-1  | 
payments-db-1  | 
payments-db-1  | waiting for server to shut down....2025-08-08 20:37:38.528 GMT [47] LOG:  received fast shutdown request
payments-db-1  | 2025-08-08 20:37:38.538 GMT [47] LOG:  aborting any active transactions
payments-db-1  | 2025-08-08 20:37:38.541 GMT [47] LOG:  background worker "logical replication launcher" (PID 53) exited with exit code 1
payments-db-1  | 2025-08-08 20:37:38.599 GMT [48] LOG:  shutting down
payments-db-1  | 2025-08-08 20:37:38.604 GMT [48] LOG:  checkpoint starting: shutdown immediate
payments-db-1  | 2025-08-08 20:37:39.170 GMT [48] LOG:  checkpoint complete: wrote 589 buffers (46.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.045 s, sync=0.497 s, total=0.571 s; sync files=306, longest=0.013 s, average=0.002 s; distance=4279 kB, estimate=4279 kB; lsn=0/191B1D8, redo lsn=0/191B1D8
payments-db-1  | 2025-08-08 20:37:39.175 GMT [47] LOG:  database system is shut down
payments-db-1  |  done
payments-db-1  | server stopped
payments-db-1  | 
payments-db-1  | PostgreSQL init process complete; ready for start up.
payments-db-1  | 
payments-db-1  | 2025-08-08 20:37:39.257 GMT [1] LOG:  starting PostgreSQL 17.5 on x86_64-pc-linux-musl, compiled by gcc (Alpine 14.2.0) 14.2.0, 64-bit
payments-db-1  | 2025-08-08 20:37:39.257 GMT [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
payments-db-1  | 2025-08-08 20:37:39.257 GMT [1] LOG:  listening on IPv6 address "::", port 5432
payments-db-1  | 2025-08-08 20:37:39.272 GMT [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
payments-db-1  | 2025-08-08 20:37:39.286 GMT [65] LOG:  database system was shut down at 2025-08-08 20:37:39 GMT
payments-db-1  | 2025-08-08 20:37:39.295 GMT [1] LOG:  database system is ready to accept connections
backend2-1     | 2025-08-08 20:37:42,204 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 GROUP BY service
payments-db-1  | 2025-08-08 20:37:42.602 GMT [76] FATAL:  role "postgres" does not exist
payments-db-1  | 2025-08-08 20:37:47.667 GMT [83] FATAL:  role "postgres" does not exist
backend2-1     | 2025-08-08 20:37:48,647 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 AND requested_at >= $1 AND requested_at <= $2 GROUP BY service
payments-db-1  | 2025-08-08 20:37:52.800 GMT [94] FATAL:  role "postgres" does not exist
payments-db-1  | 2025-08-08 20:37:57.906 GMT [101] FATAL:  role "postgres" does not exist
backend2-1     | 2025-08-08 20:37:58,691 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 AND requested_at >= $1 AND requested_at <= $2 GROUP BY service
payments-db-1  | 2025-08-08 20:38:03.020 GMT [124] FATAL:  role "postgres" does not exist
payments-db-1  | 2025-08-08 20:38:08.208 GMT [131] FATAL:  role "postgres" does not exist
backend2-1     | 2025-08-08 20:38:08,704 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 AND requested_at >= $1 AND requested_at <= $2 GROUP BY service
payments-db-1  | 2025-08-08 20:38:13.306 GMT [138] FATAL:  role "postgres" does not exist
payments-db-1  | 2025-08-08 20:38:18.410 GMT [145] FATAL:  role "postgres" does not exist
backend2-1     | 2025-08-08 20:38:18,709 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 AND requested_at >= $1 AND requested_at <= $2 GROUP BY service
payments-db-1  | 2025-08-08 20:38:23.510 GMT [153] FATAL:  role "postgres" does not exist
payments-db-1  | 2025-08-08 20:38:28.569 GMT [160] FATAL:  role "postgres" does not exist
backend1-1     | 2025-08-08 20:38:28,715 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 AND requested_at >= $1 AND requested_at <= $2 GROUP BY service
payments-db-1  | 2025-08-08 20:38:33.808 GMT [167] FATAL:  role "postgres" does not exist
backend1-1     | 2025-08-08 20:38:38,817 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 AND requested_at >= $1 AND requested_at <= $2 GROUP BY service
payments-db-1  | 2025-08-08 20:38:38.913 GMT [174] FATAL:  role "postgres" does not exist
payments-db-1  | 2025-08-08 20:38:44.008 GMT [182] FATAL:  role "postgres" does not exist
payments-db-1  | 2025-08-08 20:38:49.118 GMT [189] FATAL:  role "postgres" does not exist
backend1-1     | 2025-08-08 20:38:49,658 INFO  [com.rin.inf.DataSourceProvider] (vert.x-eventloop-thread-1) SELECT service, SUM(amount) total_amount, COUNT(correlation_id) total_request FROM payments WHERE 1=1 AND requested_at >= $1 AND requested_at <= $2 GROUP BY service
[Knginx-1 exited with code 0
backend1-1     | 2025-08-08 20:38:50,750 INFO  [com.rin.inf.HealthChecker] (vert.x-eventloop-thread-0) Closed server
backend2-1     | 2025-08-08 20:38:50,775 INFO  [com.rin.inf.HealthChecker] (vert.x-eventloop-thread-1) Closed client
backend1-1     | 2025-08-08 20:38:50,828 INFO  [com.rin.inf.HealthChecker] (executor-thread-3) Health server might be starting
backend1-1     | 2025-08-08 20:38:50,909 INFO  [io.quarkus] (main) payment_processor stopped in 0.264s
backend2-1     | 2025-08-08 20:38:50,926 INFO  [io.quarkus] (main) payment_processor stopped in 0.260s
[Kbackend1-1 exited with code 143
[Kbackend2-1 exited with code 143
payments-db-1  | 2025-08-08 20:38:51.932 GMT [1] LOG:  received fast shutdown request
payments-db-1  | 2025-08-08 20:38:51.939 GMT [1] LOG:  aborting any active transactions
payments-db-1  | 2025-08-08 20:38:51.942 GMT [1] LOG:  background worker "logical replication launcher" (PID 68) exited with exit code 1
payments-db-1  | 2025-08-08 20:38:51.943 GMT [63] LOG:  shutting down
payments-db-1  | 2025-08-08 20:38:51.954 GMT [63] LOG:  checkpoint starting: shutdown immediate
payments-db-1  | 2025-08-08 20:38:52.015 GMT [63] LOG:  checkpoint complete: wrote 317 buffers (24.8%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.022 s, sync=0.018 s, total=0.072 s; sync files=23, longest=0.010 s, average=0.001 s; distance=4936 kB, estimate=4936 kB; lsn=0/1DED390, redo lsn=0/1DED390
payments-db-1  | 2025-08-08 20:38:52.020 GMT [1] LOG:  database system is shut down
[Kpayments-db-1 exited with code 0
log truncated at line 1000
