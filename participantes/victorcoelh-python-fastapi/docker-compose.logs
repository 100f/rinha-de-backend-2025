
 web-server-2 Pulling 
 web-server-1 Pulling 
 396b1da7636e Already exists 
 b0c5fecaa197 Pulling fs layer 
 0d3316b99266 Pulling fs layer 
 3348a90cb78b Pulling fs layer 
 75382d0cbbf1 Pulling fs layer 
 5c5579a81821 Pulling fs layer 
 71ac2672d7a5 Pulling fs layer 
 3c99c64ec876 Pulling fs layer 
 8ee24f6e619a Pulling fs layer 
 75382d0cbbf1 Waiting 
 5c5579a81821 Waiting 
 71ac2672d7a5 Waiting 
 3c99c64ec876 Waiting 
 8ee24f6e619a Waiting 
 396b1da7636e Already exists 
 0d3316b99266 Downloading [>                                                  ]  120.3kB/11.73MB
 b0c5fecaa197 Pulling fs layer 
 0d3316b99266 Pulling fs layer 
 3348a90cb78b Pulling fs layer 
 75382d0cbbf1 Pulling fs layer 
 5c5579a81821 Pulling fs layer 
 71ac2672d7a5 Pulling fs layer 
 3c99c64ec876 Pulling fs layer 
 8ee24f6e619a Pulling fs layer 
 8ee24f6e619a Waiting 
 75382d0cbbf1 Waiting 
 0d3316b99266 Downloading [>                                                  ]  120.3kB/11.73MB
 71ac2672d7a5 Waiting 
 5c5579a81821 Waiting 
 3c99c64ec876 Waiting 
 b0c5fecaa197 Downloading [>                                                  ]  16.38kB/1.29MB
 b0c5fecaa197 Downloading [>                                                  ]  16.38kB/1.29MB
 3348a90cb78b Downloading [==================================================>]     249B/249B
 3348a90cb78b Verifying Checksum 
 3348a90cb78b Download complete 
 3348a90cb78b Downloading [==================================================>]     249B/249B
 3348a90cb78b Verifying Checksum 
 3348a90cb78b Download complete 
 b0c5fecaa197 Verifying Checksum 
 b0c5fecaa197 Verifying Checksum 
 b0c5fecaa197 Download complete 
 b0c5fecaa197 Download complete 
 b0c5fecaa197 Extracting [=>                                                 ]  32.77kB/1.29MB
 b0c5fecaa197 Extracting [=>                                                 ]  32.77kB/1.29MB
 75382d0cbbf1 Download complete 
 75382d0cbbf1 Download complete 
 5c5579a81821 Downloading [=====================>                             ]  16.38kB/37.8kB
 5c5579a81821 Downloading [==================================================>]   37.8kB/37.8kB
 5c5579a81821 Verifying Checksum 
 5c5579a81821 Download complete 
 5c5579a81821 Download complete 
 71ac2672d7a5 Downloading [==================================================>]      93B/93B
 71ac2672d7a5 Downloading [==================================================>]      93B/93B
 71ac2672d7a5 Download complete 
 71ac2672d7a5 Verifying Checksum 
 71ac2672d7a5 Download complete 
 0d3316b99266 Verifying Checksum 
 0d3316b99266 Download complete 
 0d3316b99266 Verifying Checksum 
 0d3316b99266 Download complete 
 b0c5fecaa197 Extracting [==================================>                ]  884.7kB/1.29MB
 b0c5fecaa197 Extracting [==================================>                ]  884.7kB/1.29MB
 8ee24f6e619a Download complete 
 8ee24f6e619a Downloading [==================================================>]  8.683kB/8.683kB
 8ee24f6e619a Verifying Checksum 
 8ee24f6e619a Download complete 
 b0c5fecaa197 Extracting [==================================================>]   1.29MB/1.29MB
 b0c5fecaa197 Extracting [==================================================>]   1.29MB/1.29MB
 3c99c64ec876 Downloading [>                                                  ]  305.2kB/29.44MB
 3c99c64ec876 Downloading [>                                                  ]  305.2kB/29.44MB
 b0c5fecaa197 Pull complete 
 b0c5fecaa197 Pull complete 
 0d3316b99266 Extracting [>                                                  ]  131.1kB/11.73MB
 0d3316b99266 Extracting [>                                                  ]  131.1kB/11.73MB
 0d3316b99266 Extracting [===>                                               ]  917.5kB/11.73MB
 0d3316b99266 Extracting [===>                                               ]  917.5kB/11.73MB
 3c99c64ec876 Downloading [==============================>                    ]  17.76MB/29.44MB
 3c99c64ec876 Downloading [==============================>                    ]  17.76MB/29.44MB
 0d3316b99266 Extracting [===============>                                   ]   3.67MB/11.73MB
 0d3316b99266 Extracting [===============>                                   ]   3.67MB/11.73MB
 3c99c64ec876 Verifying Checksum 
 3c99c64ec876 Download complete 
 3c99c64ec876 Verifying Checksum 
 3c99c64ec876 Download complete 
 0d3316b99266 Extracting [==========================>                        ]  6.291MB/11.73MB
 0d3316b99266 Extracting [==========================>                        ]  6.291MB/11.73MB
 0d3316b99266 Extracting [=======================================>           ]  9.175MB/11.73MB
 0d3316b99266 Extracting [=======================================>           ]  9.175MB/11.73MB
 0d3316b99266 Extracting [============================================>      ]  10.35MB/11.73MB
 0d3316b99266 Extracting [============================================>      ]  10.35MB/11.73MB
 0d3316b99266 Extracting [================================================>  ]  11.27MB/11.73MB
 0d3316b99266 Extracting [================================================>  ]  11.27MB/11.73MB
 0d3316b99266 Extracting [==================================================>]  11.73MB/11.73MB
 0d3316b99266 Extracting [==================================================>]  11.73MB/11.73MB
 0d3316b99266 Pull complete 
 0d3316b99266 Pull complete 
 3348a90cb78b Extracting [==================================================>]     249B/249B
 3348a90cb78b Extracting [==================================================>]     249B/249B
 3348a90cb78b Extracting [==================================================>]     249B/249B
 3348a90cb78b Extracting [==================================================>]     249B/249B
 3348a90cb78b Pull complete 
 3348a90cb78b Pull complete 
 75382d0cbbf1 Extracting [==================================================>]      93B/93B
 75382d0cbbf1 Extracting [==================================================>]      93B/93B
 75382d0cbbf1 Extracting [==================================================>]      93B/93B
 75382d0cbbf1 Extracting [==================================================>]      93B/93B
 75382d0cbbf1 Pull complete 
 75382d0cbbf1 Pull complete 
 5c5579a81821 Extracting [===========================================>       ]  32.77kB/37.8kB
 5c5579a81821 Extracting [===========================================>       ]  32.77kB/37.8kB
 5c5579a81821 Extracting [==================================================>]   37.8kB/37.8kB
 5c5579a81821 Extracting [==================================================>]   37.8kB/37.8kB
 5c5579a81821 Pull complete 
 5c5579a81821 Pull complete 
 71ac2672d7a5 Extracting [==================================================>]      93B/93B
 71ac2672d7a5 Extracting [==================================================>]      93B/93B
 71ac2672d7a5 Extracting [==================================================>]      93B/93B
 71ac2672d7a5 Extracting [==================================================>]      93B/93B
 71ac2672d7a5 Pull complete 
 71ac2672d7a5 Pull complete 
 3c99c64ec876 Extracting [>                                                  ]  294.9kB/29.44MB
 3c99c64ec876 Extracting [>                                                  ]  294.9kB/29.44MB
 3c99c64ec876 Extracting [=================>                                 ]  10.03MB/29.44MB
 3c99c64ec876 Extracting [=================>                                 ]  10.03MB/29.44MB
 3c99c64ec876 Extracting [===========================>                       ]  15.93MB/29.44MB
 3c99c64ec876 Extracting [===========================>                       ]  15.93MB/29.44MB
 3c99c64ec876 Extracting [=================================>                 ]  19.76MB/29.44MB
 3c99c64ec876 Extracting [=================================>                 ]  19.76MB/29.44MB
 3c99c64ec876 Extracting [====================================>              ]  21.23MB/29.44MB
 3c99c64ec876 Extracting [====================================>              ]  21.23MB/29.44MB
 3c99c64ec876 Extracting [=========================================>         ]  24.48MB/29.44MB
 3c99c64ec876 Extracting [=========================================>         ]  24.48MB/29.44MB
 3c99c64ec876 Extracting [===============================================>   ]  27.72MB/29.44MB
 3c99c64ec876 Extracting [===============================================>   ]  27.72MB/29.44MB
 3c99c64ec876 Extracting [==================================================>]  29.44MB/29.44MB
 3c99c64ec876 Extracting [==================================================>]  29.44MB/29.44MB
 3c99c64ec876 Pull complete 
 3c99c64ec876 Pull complete 
 8ee24f6e619a Extracting [==================================================>]  8.683kB/8.683kB
 8ee24f6e619a Extracting [==================================================>]  8.683kB/8.683kB
 8ee24f6e619a Extracting [==================================================>]  8.683kB/8.683kB
 8ee24f6e619a Extracting [==================================================>]  8.683kB/8.683kB
 8ee24f6e619a Pull complete 
 8ee24f6e619a Pull complete 
 web-server-1 Pulled 
 web-server-2 Pulled 
 Network victorcoelh-python-fastapi_default  Creating
 Network victorcoelh-python-fastapi_default  Created
 Container redis  Creating
 Container fastapi-1  Creating
 Container fastapi-2  Creating
 Container redis  Created
 Container fastapi-1  Created
 Container fastapi-2  Created
 Container nginx  Creating
 Container nginx  Created
Attaching to fastapi-1, fastapi-2, nginx, redis
redis  | 1:C 15 Aug 2025 22:16:59.682 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
redis  | 1:C 15 Aug 2025 22:16:59.682 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis  | 1:C 15 Aug 2025 22:16:59.682 * Redis version=7.2.10, bits=64, commit=00000000, modified=0, pid=1, just started
redis  | 1:C 15 Aug 2025 22:16:59.682 * Configuration loaded
redis  | 1:M 15 Aug 2025 22:16:59.682 * monotonic clock: POSIX clock_gettime
redis  | 1:M 15 Aug 2025 22:16:59.683 * Running mode=standalone, port=6379.
redis  | 1:M 15 Aug 2025 22:16:59.684 * Server initialized
redis  | 1:M 15 Aug 2025 22:16:59.684 * Ready to accept connections tcp
nginx  | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx  | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx  | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx  | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx  | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx  | /docker-entrypoint.sh: Configuration complete; ready for start up
fastapi-2  | [INFO] Starting granian (main PID: 1)
fastapi-2  | [INFO] Listening at: http://0.0.0.0:8000
fastapi-2  | [INFO] Spawning worker-1 with PID: 7
fastapi-2  | [INFO] Spawning worker-2 with PID: 9
fastapi-1  | [INFO] Starting granian (main PID: 1)
fastapi-1  | [INFO] Listening at: http://0.0.0.0:8000
fastapi-1  | [INFO] Spawning worker-1 with PID: 7
fastapi-1  | [INFO] Spawning worker-2 with PID: 9
nginx      | 2025/08/15 22:17:00 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.2:8000/payments-summary", host: "localhost:9999"
nginx      | 2025/08/15 22:17:00 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.4:8000/payments-summary", host: "localhost:9999"
fastapi-2  | [INFO] Started worker-2
fastapi-2  | [INFO] Started worker-2 runtime-1
fastapi-2  | [INFO] Started worker-1
fastapi-2  | [INFO] Started worker-1 runtime-1
fastapi-1  | [INFO] Started worker-1
fastapi-1  | [INFO] Started worker-1 runtime-1
fastapi-1  | [INFO] Started worker-2
fastapi-1  | [INFO] Started worker-2 runtime-1
redis      | 1:signal-handler (1755296291) Received SIGTERM scheduling shutdown...
redis      | 1:M 15 Aug 2025 22:18:11.249 * User requested shutdown...
redis      | 1:M 15 Aug 2025 22:18:11.249 # Redis is now ready to exit, bye bye...
[Knginx exited with code 0
[Kredis exited with code 0
fastapi-2  | [INFO] Shutting down granian
fastapi-2  | [INFO] Stopping worker-1 runtime-1
fastapi-2  | [INFO] Stopping worker-2 runtime-1
fastapi-2  | [INFO] Stopping worker-1
fastapi-2  | [INFO] Stopping worker-2
fastapi-1  | [INFO] Shutting down granian
fastapi-1  | [INFO] Stopping worker-1
fastapi-1  | [INFO] Stopping worker-1 runtime-1
fastapi-1  | [INFO] Stopping worker-2 runtime-1
fastapi-1  | [INFO] Stopping worker-2
