
 web-server-1 Pulling 
 workers Pulling 
 web-server-2 Pulling 
 9824c27679d3 Already exists 
 fa0cfe9de208 Pulling fs layer 
 21e4653e6a47 Pulling fs layer 
 111c49455a02 Pulling fs layer 
 f9585c1d5638 Pulling fs layer 
 edc918935924 Pulling fs layer 
 f8cc06b526c4 Pulling fs layer 
 5ec81cc07629 Pulling fs layer 
 9adf8f605d5f Pulling fs layer 
 20198b45d92d Pulling fs layer 
 bd4f71ba36bc Pulling fs layer 
 f9585c1d5638 Waiting 
 edc918935924 Waiting 
 f8cc06b526c4 Waiting 
 5ec81cc07629 Waiting 
 9adf8f605d5f Waiting 
 20198b45d92d Waiting 
 bd4f71ba36bc Waiting 
 111c49455a02 Downloading [==================================================>]     250B/250B
 111c49455a02 Verifying Checksum 
 111c49455a02 Download complete 
 fa0cfe9de208 Downloading [=>                                                 ]  16.38kB/447.7kB
 21e4653e6a47 Downloading [>                                                  ]  150.2kB/13.68MB
 fa0cfe9de208 Downloading [==================================================>]  447.7kB/447.7kB
 fa0cfe9de208 Verifying Checksum 
 fa0cfe9de208 Download complete 
 fa0cfe9de208 Extracting [===>                                               ]  32.77kB/447.7kB
 edc918935924 Downloading [==================================================>]      93B/93B
 edc918935924 Download complete 
 21e4653e6a47 Verifying Checksum 
 21e4653e6a47 Download complete 
 fa0cfe9de208 Extracting [==================================================>]  447.7kB/447.7kB
 fa0cfe9de208 Extracting [==================================================>]  447.7kB/447.7kB
 5ec81cc07629 Downloading [==================================================>]     237B/237B
 5ec81cc07629 Verifying Checksum 
 5ec81cc07629 Download complete 
 f8cc06b526c4 Downloading [==================>                                ]  16.38kB/44.73kB
 f8cc06b526c4 Downloading [==================================================>]  44.73kB/44.73kB
 f8cc06b526c4 Verifying Checksum 
 f8cc06b526c4 Download complete 
 9adf8f605d5f Downloading [==================================================>]      93B/93B
 9adf8f605d5f Verifying Checksum 
 9adf8f605d5f Download complete 
 f9585c1d5638 Downloading [>                                                  ]  191.7kB/19MB
 bd4f71ba36bc Downloading [==============================>                    ]  16.38kB/26.78kB
 bd4f71ba36bc Downloading [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Verifying Checksum 
 bd4f71ba36bc Download complete 
 fa0cfe9de208 Pull complete 
 21e4653e6a47 Extracting [>                                                  ]  163.8kB/13.68MB
 f9585c1d5638 Downloading [==============================================>    ]  17.81MB/19MB
 f9585c1d5638 Verifying Checksum 
 f9585c1d5638 Download complete 
 20198b45d92d Downloading [>                                                  ]  177.2kB/16.64MB
 9824c27679d3 Already exists 
 fa0cfe9de208 Already exists 
 21e4653e6a47 Pulling fs layer 
 111c49455a02 Pulling fs layer 
 f9585c1d5638 Pulling fs layer 
 edc918935924 Pulling fs layer 
 f8cc06b526c4 Pulling fs layer 
 5ec81cc07629 Pulling fs layer 
 9adf8f605d5f Pulling fs layer 
 20198b45d92d Pulling fs layer 
 bd4f71ba36bc Pulling fs layer 
 bd4f71ba36bc Download complete 
 edc918935924 Download complete 
 21e4653e6a47 Extracting [>                                                  ]  163.8kB/13.68MB
 111c49455a02 Download complete 
 f9585c1d5638 Download complete 
 5ec81cc07629 Download complete 
 f8cc06b526c4 Download complete 
 9adf8f605d5f Download complete 
 20198b45d92d Downloading [>                                                  ]  177.2kB/16.64MB
 9824c27679d3 Already exists 
 fa0cfe9de208 Already exists 
 21e4653e6a47 Pulling fs layer 
 111c49455a02 Pulling fs layer 
 f9585c1d5638 Pulling fs layer 
 edc918935924 Pulling fs layer 
 f8cc06b526c4 Pulling fs layer 
 5ec81cc07629 Pulling fs layer 
 9adf8f605d5f Pulling fs layer 
 20198b45d92d Pulling fs layer 
 bd4f71ba36bc Pulling fs layer 
 bd4f71ba36bc Download complete 
 edc918935924 Download complete 
 21e4653e6a47 Extracting [>                                                  ]  163.8kB/13.68MB
 111c49455a02 Download complete 
 f9585c1d5638 Download complete 
 5ec81cc07629 Download complete 
 f8cc06b526c4 Download complete 
 9adf8f605d5f Download complete 
 20198b45d92d Downloading [>                                                  ]  177.2kB/16.64MB
 21e4653e6a47 Extracting [==========>                                        ]  2.785MB/13.68MB
 21e4653e6a47 Extracting [==========>                                        ]  2.785MB/13.68MB
 21e4653e6a47 Extracting [==========>                                        ]  2.785MB/13.68MB
 20198b45d92d Downloading [==============================================>    ]   15.5MB/16.64MB
 20198b45d92d Downloading [==============================================>    ]   15.5MB/16.64MB
 20198b45d92d Downloading [==============================================>    ]   15.5MB/16.64MB
 20198b45d92d Verifying Checksum 
 20198b45d92d Download complete 
 20198b45d92d Verifying Checksum 
 20198b45d92d Download complete 
 20198b45d92d Download complete 
 21e4653e6a47 Extracting [====================>                              ]  5.571MB/13.68MB
 21e4653e6a47 Extracting [====================>                              ]  5.571MB/13.68MB
 21e4653e6a47 Extracting [====================>                              ]  5.571MB/13.68MB
 21e4653e6a47 Extracting [=============================>                     ]  8.192MB/13.68MB
 21e4653e6a47 Extracting [=============================>                     ]  8.192MB/13.68MB
 21e4653e6a47 Extracting [=============================>                     ]  8.192MB/13.68MB
 21e4653e6a47 Extracting [=======================================>           ]  10.81MB/13.68MB
 21e4653e6a47 Extracting [=======================================>           ]  10.81MB/13.68MB
 21e4653e6a47 Extracting [=======================================>           ]  10.81MB/13.68MB
 21e4653e6a47 Extracting [===========================================>       ]  11.96MB/13.68MB
 21e4653e6a47 Extracting [===========================================>       ]  11.96MB/13.68MB
 21e4653e6a47 Extracting [===========================================>       ]  11.96MB/13.68MB
 21e4653e6a47 Extracting [================================================>  ]  13.27MB/13.68MB
 21e4653e6a47 Extracting [================================================>  ]  13.27MB/13.68MB
 21e4653e6a47 Extracting [================================================>  ]  13.27MB/13.68MB
 21e4653e6a47 Extracting [==================================================>]  13.68MB/13.68MB
 21e4653e6a47 Extracting [==================================================>]  13.68MB/13.68MB
 21e4653e6a47 Extracting [==================================================>]  13.68MB/13.68MB
 21e4653e6a47 Pull complete 
 21e4653e6a47 Pull complete 
 21e4653e6a47 Pull complete 
 111c49455a02 Extracting [==================================================>]     250B/250B
 111c49455a02 Extracting [==================================================>]     250B/250B
 111c49455a02 Extracting [==================================================>]     250B/250B
 111c49455a02 Extracting [==================================================>]     250B/250B
 111c49455a02 Extracting [==================================================>]     250B/250B
 111c49455a02 Extracting [==================================================>]     250B/250B
 111c49455a02 Pull complete 
 111c49455a02 Pull complete 
 111c49455a02 Pull complete 
 f9585c1d5638 Extracting [>                                                  ]  196.6kB/19MB
 f9585c1d5638 Extracting [>                                                  ]  196.6kB/19MB
 f9585c1d5638 Extracting [>                                                  ]  196.6kB/19MB
 f9585c1d5638 Extracting [=====================>                             ]  8.061MB/19MB
 f9585c1d5638 Extracting [=====================>                             ]  8.061MB/19MB
 f9585c1d5638 Extracting [=====================>                             ]  8.061MB/19MB
 f9585c1d5638 Extracting [=========================================>         ]  15.93MB/19MB
 f9585c1d5638 Extracting [=========================================>         ]  15.93MB/19MB
 f9585c1d5638 Extracting [=========================================>         ]  15.93MB/19MB
 f9585c1d5638 Extracting [==================================================>]     19MB/19MB
 f9585c1d5638 Extracting [==================================================>]     19MB/19MB
 f9585c1d5638 Extracting [==================================================>]     19MB/19MB
 f9585c1d5638 Pull complete 
 f9585c1d5638 Pull complete 
 f9585c1d5638 Pull complete 
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Pull complete 
 edc918935924 Pull complete 
 edc918935924 Pull complete 
 f8cc06b526c4 Extracting [====================================>              ]  32.77kB/44.73kB
 f8cc06b526c4 Extracting [====================================>              ]  32.77kB/44.73kB
 f8cc06b526c4 Extracting [====================================>              ]  32.77kB/44.73kB
 f8cc06b526c4 Extracting [==================================================>]  44.73kB/44.73kB
 f8cc06b526c4 Extracting [==================================================>]  44.73kB/44.73kB
 f8cc06b526c4 Extracting [==================================================>]  44.73kB/44.73kB
 f8cc06b526c4 Pull complete 
 f8cc06b526c4 Pull complete 
 f8cc06b526c4 Pull complete 
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Pull complete 
 5ec81cc07629 Pull complete 
 5ec81cc07629 Pull complete 
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Pull complete 
 9adf8f605d5f Pull complete 
 9adf8f605d5f Pull complete 
 20198b45d92d Extracting [>                                                  ]  196.6kB/16.64MB
 20198b45d92d Extracting [>                                                  ]  196.6kB/16.64MB
 20198b45d92d Extracting [>                                                  ]  196.6kB/16.64MB
 20198b45d92d Extracting [==>                                                ]    983kB/16.64MB
 20198b45d92d Extracting [==>                                                ]    983kB/16.64MB
 20198b45d92d Extracting [==>                                                ]    983kB/16.64MB
 20198b45d92d Extracting [========>                                          ]  2.949MB/16.64MB
 20198b45d92d Extracting [========>                                          ]  2.949MB/16.64MB
 20198b45d92d Extracting [========>                                          ]  2.949MB/16.64MB
 20198b45d92d Extracting [=====================>                             ]  7.274MB/16.64MB
 20198b45d92d Extracting [=====================>                             ]  7.274MB/16.64MB
 20198b45d92d Extracting [=====================>                             ]  7.274MB/16.64MB
 20198b45d92d Extracting [=========================>                         ]  8.454MB/16.64MB
 20198b45d92d Extracting [=========================>                         ]  8.454MB/16.64MB
 20198b45d92d Extracting [=========================>                         ]  8.454MB/16.64MB
 20198b45d92d Extracting [=================================>                 ]  11.01MB/16.64MB
 20198b45d92d Extracting [=================================>                 ]  11.01MB/16.64MB
 20198b45d92d Extracting [=================================>                 ]  11.01MB/16.64MB
 20198b45d92d Extracting [===================================>               ]   11.8MB/16.64MB
 20198b45d92d Extracting [===================================>               ]   11.8MB/16.64MB
 20198b45d92d Extracting [===================================>               ]   11.8MB/16.64MB
 20198b45d92d Extracting [=====================================>             ]  12.39MB/16.64MB
 20198b45d92d Extracting [=====================================>             ]  12.39MB/16.64MB
 20198b45d92d Extracting [=====================================>             ]  12.39MB/16.64MB
 20198b45d92d Extracting [=========================================>         ]  13.76MB/16.64MB
 20198b45d92d Extracting [=========================================>         ]  13.76MB/16.64MB
 20198b45d92d Extracting [=========================================>         ]  13.76MB/16.64MB
 20198b45d92d Extracting [===========================================>       ]  14.35MB/16.64MB
 20198b45d92d Extracting [===========================================>       ]  14.35MB/16.64MB
 20198b45d92d Extracting [===========================================>       ]  14.35MB/16.64MB
 20198b45d92d Extracting [============================================>      ]  14.94MB/16.64MB
 20198b45d92d Extracting [============================================>      ]  14.94MB/16.64MB
 20198b45d92d Extracting [============================================>      ]  14.94MB/16.64MB
 20198b45d92d Extracting [==================================================>]  16.64MB/16.64MB
 20198b45d92d Extracting [==================================================>]  16.64MB/16.64MB
 20198b45d92d Extracting [==================================================>]  16.64MB/16.64MB
 20198b45d92d Pull complete 
 20198b45d92d Pull complete 
 20198b45d92d Pull complete 
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Pull complete 
 bd4f71ba36bc Pull complete 
 bd4f71ba36bc Pull complete 
 web-server-1 Pulled 
 web-server-2 Pulled 
 workers Pulled 
 Network victorcoelh-python-fastapi_default  Creating
 Network victorcoelh-python-fastapi_default  Created
 Container fastapi-2  Creating
 Container redis  Creating
 Container fastapi-1  Creating
 Container fastapi-2  Created
 Container fastapi-1  Created
 Container nginx  Creating
 Container redis  Created
 Container workers  Creating
 Container nginx  Created
 Container workers  Created
Attaching to fastapi-1, fastapi-2, nginx, redis, workers
redis  | 1:C 13 Aug 2025 08:08:52.621 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
redis  | 1:C 13 Aug 2025 08:08:52.621 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis  | 1:C 13 Aug 2025 08:08:52.621 * Redis version=7.2.10, bits=64, commit=00000000, modified=0, pid=1, just started
redis  | 1:C 13 Aug 2025 08:08:52.621 * Configuration loaded
redis  | 1:M 13 Aug 2025 08:08:52.622 * monotonic clock: POSIX clock_gettime
redis  | 1:M 13 Aug 2025 08:08:52.623 * Running mode=standalone, port=6379.
redis  | 1:M 13 Aug 2025 08:08:52.623 * Server initialized
redis  | 1:M 13 Aug 2025 08:08:52.623 * Ready to accept connections tcp
nginx  | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx  | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx  | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx  | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx  | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx  | /docker-entrypoint.sh: Configuration complete; ready for start up
workers  | [2025-08-13 08:08:55,376] [PID 11] [MainThread] [dramatiq.MainProcess] [INFO] Dramatiq '1.18.0' is booting up.
workers  | [2025-08-13 08:08:55,377] [PID 38] [MainThread] [dramatiq.ForkProcess(0)] [INFO] Fork process 'dramatiq.middleware.prometheus:_run_exposition_server' is ready for action.
fastapi-2  | [INFO] Starting granian (main PID: 10)
fastapi-2  | [INFO] Listening at: http://0.0.0.0:8000
fastapi-2  | [INFO] Spawning worker-1 with PID: 11
fastapi-1  | [INFO] Starting granian (main PID: 13)
fastapi-1  | [INFO] Listening at: http://0.0.0.0:8000
fastapi-1  | [INFO] Spawning worker-1 with PID: 14
nginx      | 2025/08/13 08:08:57 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.2:8000/payments-summary", host: "localhost:9999"
nginx      | 2025/08/13 08:08:57 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.3:8000/payments-summary", host: "localhost:9999"
fastapi-2  | [INFO] Started worker-1
fastapi-2  | [INFO] Started worker-1 runtime-1
fastapi-1  | [INFO] Started worker-1
fastapi-1  | [INFO] Started worker-1 runtime-1
workers    | [2025-08-13 08:10:03,164] [PID 11] [MainThread] [dramatiq.MainProcess] [INFO] Sending signal 'SIGTERM' to subprocesses...
workers    | [2025-08-13 08:10:03,165] [PID 38] [MainThread] [dramatiq.ForkProcess(0)] [INFO] Stopping fork process...
[Knginx exited with code 0
[Kworkers exited with code 0
fastapi-1  | [INFO] Shutting down granian
fastapi-1  | [INFO] Stopping worker-1
fastapi-1  | [INFO] Stopping worker-1 runtime-1
redis      | 1:signal-handler (1755072606) Received SIGTERM scheduling shutdown...
fastapi-2  | [INFO] Shutting down granian
fastapi-2  | [INFO] Stopping worker-1
fastapi-2  | [INFO] Stopping worker-1 runtime-1
redis      | 1:M 13 Aug 2025 08:10:06.640 * User requested shutdown...
redis      | 1:M 13 Aug 2025 08:10:06.640 # Redis is now ready to exit, bye bye...
[Kredis exited with code 0
[Kfastapi-2 exited with code 0
