
 web-server-1 Pulling 
 web-server-2 Pulling 
 workers Pulling 
 9824c27679d3 Already exists 
 fa0cfe9de208 Already exists 
 21e4653e6a47 Already exists 
 111c49455a02 Already exists 
 f9585c1d5638 Already exists 
 edc918935924 Pulling fs layer 
 f8cc06b526c4 Pulling fs layer 
 5ec81cc07629 Pulling fs layer 
 9adf8f605d5f Pulling fs layer 
 20198b45d92d Pulling fs layer 
 bd4f71ba36bc Pulling fs layer 
 9adf8f605d5f Waiting 
 20198b45d92d Waiting 
 bd4f71ba36bc Waiting 
 9824c27679d3 Already exists 
 fa0cfe9de208 Already exists 
 21e4653e6a47 Already exists 
 111c49455a02 Already exists 
 f9585c1d5638 Already exists 
 edc918935924 Pulling fs layer 
 f8cc06b526c4 Pulling fs layer 
 5ec81cc07629 Pulling fs layer 
 9adf8f605d5f Pulling fs layer 
 20198b45d92d Pulling fs layer 
 bd4f71ba36bc Pulling fs layer 
 bd4f71ba36bc Waiting 
 9adf8f605d5f Waiting 
 20198b45d92d Waiting 
 9824c27679d3 Already exists 
 fa0cfe9de208 Already exists 
 21e4653e6a47 Already exists 
 111c49455a02 Already exists 
 f9585c1d5638 Already exists 
 edc918935924 Pulling fs layer 
 f8cc06b526c4 Pulling fs layer 
 5ec81cc07629 Pulling fs layer 
 9adf8f605d5f Pulling fs layer 
 20198b45d92d Pulling fs layer 
 bd4f71ba36bc Pulling fs layer 
 bd4f71ba36bc Waiting 
 9adf8f605d5f Waiting 
 20198b45d92d Waiting 
 f8cc06b526c4 Downloading [=>                                                 ]  1.008kB/44.73kB
 f8cc06b526c4 Downloading [=>                                                 ]  1.008kB/44.73kB
 f8cc06b526c4 Downloading [=>                                                 ]  1.008kB/44.73kB
 f8cc06b526c4 Download complete 
 f8cc06b526c4 Download complete 
 f8cc06b526c4 Download complete 
 5ec81cc07629 Downloading [==================================================>]     237B/237B
 5ec81cc07629 Verifying Checksum 
 5ec81cc07629 Downloading [==================================================>]     237B/237B
 5ec81cc07629 Download complete 
 5ec81cc07629 Verifying Checksum 
 5ec81cc07629 Download complete 
 5ec81cc07629 Downloading [==================================================>]     237B/237B
 5ec81cc07629 Verifying Checksum 
 5ec81cc07629 Download complete 
 edc918935924 Downloading [==================================================>]      93B/93B
 edc918935924 Download complete 
 edc918935924 Verifying Checksum 
 edc918935924 Download complete 
 edc918935924 Downloading [==================================================>]      93B/93B
 edc918935924 Download complete 
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Extracting [==================================================>]      93B/93B
 edc918935924 Pull complete 
 edc918935924 Pull complete 
 edc918935924 Pull complete 
 f8cc06b526c4 Extracting [====================================>              ]  32.77kB/44.73kB
 f8cc06b526c4 Extracting [====================================>              ]  32.77kB/44.73kB
 f8cc06b526c4 Extracting [====================================>              ]  32.77kB/44.73kB
 f8cc06b526c4 Extracting [==================================================>]  44.73kB/44.73kB
 f8cc06b526c4 Extracting [==================================================>]  44.73kB/44.73kB
 f8cc06b526c4 Extracting [==================================================>]  44.73kB/44.73kB
 f8cc06b526c4 Pull complete 
 f8cc06b526c4 Pull complete 
 f8cc06b526c4 Pull complete 
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Extracting [==================================================>]     237B/237B
 5ec81cc07629 Pull complete 
 5ec81cc07629 Pull complete 
 5ec81cc07629 Pull complete 
 9adf8f605d5f Verifying Checksum 
 9adf8f605d5f Downloading [==================================================>]      93B/93B
 9adf8f605d5f Download complete 
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Download complete 
 9adf8f605d5f Download complete 
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Extracting [==================================================>]      93B/93B
 9adf8f605d5f Pull complete 
 9adf8f605d5f Pull complete 
 9adf8f605d5f Pull complete 
 bd4f71ba36bc Downloading [=>                                                 ]  1.008kB/26.78kB
 bd4f71ba36bc Downloading [=>                                                 ]  1.008kB/26.78kB
 bd4f71ba36bc Downloading [=>                                                 ]  1.008kB/26.78kB
 bd4f71ba36bc Downloading [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Downloading [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Verifying Checksum 
 bd4f71ba36bc Download complete 
 bd4f71ba36bc Downloading [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Verifying Checksum 
 bd4f71ba36bc Verifying Checksum 
 bd4f71ba36bc Download complete 
 20198b45d92d Downloading [>                                                  ]  168.1kB/16.64MB
 20198b45d92d Downloading [>                                                  ]  168.1kB/16.64MB
 20198b45d92d Downloading [>                                                  ]  168.1kB/16.64MB
 20198b45d92d Downloading [=======>                                           ]   2.58MB/16.64MB
 20198b45d92d Downloading [=======>                                           ]   2.58MB/16.64MB
 20198b45d92d Downloading [=======>                                           ]   2.58MB/16.64MB
 20198b45d92d Downloading [===================>                               ]  6.545MB/16.64MB
 20198b45d92d Downloading [===================>                               ]  6.545MB/16.64MB
 20198b45d92d Downloading [===================>                               ]  6.545MB/16.64MB
 20198b45d92d Downloading [===========================================>       ]  14.41MB/16.64MB
 20198b45d92d Downloading [===========================================>       ]  14.41MB/16.64MB
 20198b45d92d Downloading [===========================================>       ]  14.41MB/16.64MB
 20198b45d92d Verifying Checksum 
 20198b45d92d Download complete 
 20198b45d92d Verifying Checksum 
 20198b45d92d Download complete 
 20198b45d92d Verifying Checksum 
 20198b45d92d Download complete 
 20198b45d92d Extracting [>                                                  ]  196.6kB/16.64MB
 20198b45d92d Extracting [>                                                  ]  196.6kB/16.64MB
 20198b45d92d Extracting [>                                                  ]  196.6kB/16.64MB
 20198b45d92d Extracting [==>                                                ]  786.4kB/16.64MB
 20198b45d92d Extracting [==>                                                ]  786.4kB/16.64MB
 20198b45d92d Extracting [==>                                                ]  786.4kB/16.64MB
 20198b45d92d Extracting [========>                                          ]  2.949MB/16.64MB
 20198b45d92d Extracting [========>                                          ]  2.949MB/16.64MB
 20198b45d92d Extracting [========>                                          ]  2.949MB/16.64MB
 20198b45d92d Extracting [=====================>                             ]  7.078MB/16.64MB
 20198b45d92d Extracting [=====================>                             ]  7.078MB/16.64MB
 20198b45d92d Extracting [=====================>                             ]  7.078MB/16.64MB
 20198b45d92d Extracting [===========================>                       ]  9.044MB/16.64MB
 20198b45d92d Extracting [===========================>                       ]  9.044MB/16.64MB
 20198b45d92d Extracting [===========================>                       ]  9.044MB/16.64MB
 20198b45d92d Extracting [=================================>                 ]  11.21MB/16.64MB
 20198b45d92d Extracting [=================================>                 ]  11.21MB/16.64MB
 20198b45d92d Extracting [=================================>                 ]  11.21MB/16.64MB
 20198b45d92d Extracting [====================================>              ]  11.99MB/16.64MB
 20198b45d92d Extracting [====================================>              ]  11.99MB/16.64MB
 20198b45d92d Extracting [====================================>              ]  11.99MB/16.64MB
 20198b45d92d Extracting [========================================>          ]  13.57MB/16.64MB
 20198b45d92d Extracting [========================================>          ]  13.57MB/16.64MB
 20198b45d92d Extracting [========================================>          ]  13.57MB/16.64MB
 20198b45d92d Extracting [===========================================>       ]  14.35MB/16.64MB
 20198b45d92d Extracting [===========================================>       ]  14.35MB/16.64MB
 20198b45d92d Extracting [===========================================>       ]  14.35MB/16.64MB
 20198b45d92d Extracting [==============================================>    ]  15.34MB/16.64MB
 20198b45d92d Extracting [==============================================>    ]  15.34MB/16.64MB
 20198b45d92d Extracting [==============================================>    ]  15.34MB/16.64MB
 20198b45d92d Extracting [==================================================>]  16.64MB/16.64MB
 20198b45d92d Extracting [==================================================>]  16.64MB/16.64MB
 20198b45d92d Extracting [==================================================>]  16.64MB/16.64MB
 20198b45d92d Pull complete 
 20198b45d92d Pull complete 
 20198b45d92d Pull complete 
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Extracting [==================================================>]  26.78kB/26.78kB
 bd4f71ba36bc Pull complete 
 bd4f71ba36bc Pull complete 
 bd4f71ba36bc Pull complete 
 web-server-1 Pulled 
 workers Pulled 
 web-server-2 Pulled 
 Network victorcoelh-python-fastapi_default  Creating
 Network victorcoelh-python-fastapi_default  Created
 Container fastapi-1  Creating
 Container fastapi-2  Creating
 Container redis  Creating
 Container fastapi-2  Created
 Container fastapi-1  Created
 Container nginx  Creating
 Container redis  Created
 Container workers  Creating
 Container nginx  Created
 Container workers  Created
Attaching to fastapi-1, fastapi-2, nginx, redis, workers
redis      | 1:C 11 Aug 2025 11:38:14.602 # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
redis      | 1:C 11 Aug 2025 11:38:14.602 * oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis      | 1:C 11 Aug 2025 11:38:14.602 * Redis version=7.2.10, bits=64, commit=00000000, modified=0, pid=1, just started
redis      | 1:C 11 Aug 2025 11:38:14.602 * Configuration loaded
redis      | 1:M 11 Aug 2025 11:38:14.602 * monotonic clock: POSIX clock_gettime
redis      | 1:M 11 Aug 2025 11:38:14.603 * Running mode=standalone, port=6379.
redis      | 1:M 11 Aug 2025 11:38:14.603 * Server initialized
redis      | 1:M 11 Aug 2025 11:38:14.603 * Ready to accept connections tcp
nginx      | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx      | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx      | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx      | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx      | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx      | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx      | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx      | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx      | /docker-entrypoint.sh: Configuration complete; ready for start up
workers    | Resolved 32 packages in 0.85ms
workers    | Uninstalled 8 packages in 22ms
workers    |  - annotated-types==0.7.0
workers    |  - click==8.2.1
workers    |  - fastapi==0.116.1
workers    |  - granian==2.5.0
workers    |  - pydantic==2.11.7
workers    |  - pydantic-core==2.33.2
workers    |  - starlette==0.47.2
workers    |  - typing-inspection==0.4.1
nginx      | 2025/08/11 11:38:16 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.3:8000/payments-summary", host: "localhost:9999"
nginx      | 2025/08/11 11:38:16 [warn] 29#29: *1 upstream server temporarily disabled while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.3:8000/payments-summary", host: "localhost:9999"
nginx      | 2025/08/11 11:38:16 [error] 29#29: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.2:8000/payments-summary", host: "localhost:9999"
nginx      | 2025/08/11 11:38:16 [warn] 29#29: *1 upstream server temporarily disabled while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.2:8000/payments-summary", host: "localhost:9999"
workers    | [2025-08-11 11:38:17,815] [PID 15] [MainThread] [dramatiq.MainProcess] [INFO] Dramatiq '1.18.0' is booting up.
workers    | [2025-08-11 11:38:17,816] [PID 43] [MainThread] [dramatiq.ForkProcess(0)] [INFO] Fork process 'dramatiq.middleware.prometheus:_run_exposition_server' is ready for action.
fastapi-2  | [INFO] Starting granian (main PID: 11)
fastapi-2  | [INFO] Listening at: http://0.0.0.0:8000
fastapi-2  | [INFO] Spawning worker-1 with PID: 12
fastapi-1  | [INFO] Starting granian (main PID: 11)
fastapi-1  | [INFO] Listening at: http://0.0.0.0:8000
fastapi-1  | [INFO] Spawning worker-1 with PID: 12
nginx      | 2025/08/11 11:38:21 [error] 29#29: *4 no live upstreams while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://fastapi_cluster/payments-summary", host: "localhost:9999"
fastapi-2  | [INFO] Started worker-1
fastapi-2  | [INFO] Started worker-1 runtime-1
fastapi-1  | [INFO] Started worker-1
fastapi-1  | [INFO] Started worker-1 runtime-1
nginx      | 2025/08/11 11:38:26 [error] 29#29: *5 no live upstreams while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://fastapi_cluster/payments-summary", host: "localhost:9999"
[Knginx exited with code 0
[Kworkers exited with code 137
fastapi-1  | [INFO] Shutting down granian
fastapi-1  | [INFO] Stopping worker-1
fastapi-1  | [INFO] Stopping worker-1 runtime-1
fastapi-2  | [INFO] Shutting down granian
fastapi-2  | [INFO] Stopping worker-1
fastapi-2  | [INFO] Stopping worker-1 runtime-1
redis      | 1:signal-handler (1754912372) Received SIGTERM scheduling shutdown...
redis      | 1:M 11 Aug 2025 11:39:32.275 * User requested shutdown...
redis      | 1:M 11 Aug 2025 11:39:32.275 # Redis is now ready to exit, bye bye...
[Kredis exited with code 0
[Kfastapi-1 exited with code 0
[Kfastapi-2 exited with code 0
