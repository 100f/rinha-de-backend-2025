
 api1 Pulling 
 api2 Pulling 
 0bdf2c4d1714 Already exists 
 19f81082f6f0 Already exists 
 799df5177ae2 Already exists 
 66cd357cf7a1 Already exists 
 f2a664a2c5c7 Already exists 
 581fd715a4fb Already exists 
 997fcc85c431 Already exists 
 2bc9df87a82b Pulling fs layer 
 0bdf2c4d1714 Already exists 
 19f81082f6f0 Already exists 
 799df5177ae2 Already exists 
 66cd357cf7a1 Already exists 
 f2a664a2c5c7 Already exists 
 581fd715a4fb Already exists 
 997fcc85c431 Already exists 
 2bc9df87a82b Pulling fs layer 
 2bc9df87a82b Downloading [>                                                  ]  376.8kB/37.67MB
 2bc9df87a82b Downloading [>                                                  ]  376.8kB/37.67MB
 2bc9df87a82b Downloading [=>                                                 ]   1.13MB/37.67MB
 2bc9df87a82b Downloading [=>                                                 ]   1.13MB/37.67MB
 2bc9df87a82b Downloading [====>                                              ]  3.015MB/37.67MB
 2bc9df87a82b Downloading [====>                                              ]  3.015MB/37.67MB
 2bc9df87a82b Downloading [========>                                          ]  6.423MB/37.67MB
 2bc9df87a82b Downloading [========>                                          ]  6.423MB/37.67MB
 2bc9df87a82b Downloading [=================>                                 ]  12.85MB/37.67MB
 2bc9df87a82b Downloading [=================>                                 ]  12.85MB/37.67MB
 2bc9df87a82b Downloading [============================>                      ]  21.23MB/37.67MB
 2bc9df87a82b Downloading [============================>                      ]  21.23MB/37.67MB
 2bc9df87a82b Downloading [======================================>            ]  29.19MB/37.67MB
 2bc9df87a82b Downloading [======================================>            ]  29.19MB/37.67MB
 2bc9df87a82b Verifying Checksum 
 2bc9df87a82b Download complete 
 2bc9df87a82b Download complete 
 2bc9df87a82b Extracting [>                                                  ]  393.2kB/37.67MB
 2bc9df87a82b Extracting [>                                                  ]  393.2kB/37.67MB
 2bc9df87a82b Extracting [==>                                                ]  1.966MB/37.67MB
 2bc9df87a82b Extracting [==>                                                ]  1.966MB/37.67MB
 2bc9df87a82b Extracting [====>                                              ]  3.539MB/37.67MB
 2bc9df87a82b Extracting [====>                                              ]  3.539MB/37.67MB
 2bc9df87a82b Extracting [==========>                                        ]  8.258MB/37.67MB
 2bc9df87a82b Extracting [==========>                                        ]  8.258MB/37.67MB
 2bc9df87a82b Extracting [============>                                      ]  9.437MB/37.67MB
 2bc9df87a82b Extracting [============>                                      ]  9.437MB/37.67MB
 2bc9df87a82b Extracting [===============>                                   ]   11.4MB/37.67MB
 2bc9df87a82b Extracting [===============>                                   ]   11.4MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.19MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.19MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.58MB/37.67MB
 2bc9df87a82b Extracting [================>                                  ]  12.58MB/37.67MB
 2bc9df87a82b Extracting [==================>                                ]  13.76MB/37.67MB
 2bc9df87a82b Extracting [==================>                                ]  13.76MB/37.67MB
 2bc9df87a82b Extracting [====================>                              ]  15.73MB/37.67MB
 2bc9df87a82b Extracting [====================>                              ]  15.73MB/37.67MB
 2bc9df87a82b Extracting [======================>                            ]   17.3MB/37.67MB
 2bc9df87a82b Extracting [======================>                            ]   17.3MB/37.67MB
 2bc9df87a82b Extracting [========================>                          ]  18.48MB/37.67MB
 2bc9df87a82b Extracting [========================>                          ]  18.48MB/37.67MB
 2bc9df87a82b Extracting [============================>                      ]  21.63MB/37.67MB
 2bc9df87a82b Extracting [============================>                      ]  21.63MB/37.67MB
 2bc9df87a82b Extracting [===============================>                   ]  23.99MB/37.67MB
 2bc9df87a82b Extracting [===============================>                   ]  23.99MB/37.67MB
 2bc9df87a82b Extracting [=================================>                 ]  25.17MB/37.67MB
 2bc9df87a82b Extracting [=================================>                 ]  25.17MB/37.67MB
 2bc9df87a82b Extracting [====================================>              ]  27.13MB/37.67MB
 2bc9df87a82b Extracting [====================================>              ]  27.13MB/37.67MB
 2bc9df87a82b Extracting [=======================================>           ]  29.49MB/37.67MB
 2bc9df87a82b Extracting [=======================================>           ]  29.49MB/37.67MB
 2bc9df87a82b Extracting [===========================================>       ]  32.64MB/37.67MB
 2bc9df87a82b Extracting [===========================================>       ]  32.64MB/37.67MB
 2bc9df87a82b Extracting [================================================>  ]  36.57MB/37.67MB
 2bc9df87a82b Extracting [================================================>  ]  36.57MB/37.67MB
 2bc9df87a82b Extracting [==================================================>]  37.67MB/37.67MB
 2bc9df87a82b Extracting [==================================================>]  37.67MB/37.67MB
 2bc9df87a82b Pull complete 
 2bc9df87a82b Pull complete 
 api2 Pulled 
 api1 Pulled 
 Network pedrohsb-python_backend  Creating
 Network pedrohsb-python_backend  Created
 Container pedrohsb-python-api2-1  Creating
 Container pedrohsb-python-api1-1  Creating
 Container pedrohsb-python-api1-1  Created
 Container pedrohsb-python-api2-1  Created
 Container nginx1  Creating
 Container nginx1  Created
Attaching to nginx1, api1-1, api2-1
nginx1  | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
nginx1  | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
nginx1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
nginx1  | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
nginx1  | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
nginx1  | /docker-entrypoint.sh: Sourcing /docker-entrypoint.d/15-local-resolvers.envsh
nginx1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
nginx1  | /docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
nginx1  | /docker-entrypoint.sh: Configuration complete; ready for start up
api2-1  | INFO:     Started server process [1]
api2-1  | INFO:     Waiting for application startup.
api2-1  | INFO:     Application startup complete.
api2-1  | INFO:     Uvicorn running on http://0.0.0.0:9999 (Press CTRL+C to quit)
nginx1  | 2025/08/12 01:43:13 [error] 30#30: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.20.0.1, server: , request: "GET /payments-summary HTTP/1.1", upstream: "http://172.20.0.3:9999/payments-summary", host: "localhost:9999"
api1-1  | INFO:     Started server process [1]
api1-1  | INFO:     Waiting for application startup.
api1-1  | INFO:     Application startup complete.
api1-1  | INFO:     Uvicorn running on http://0.0.0.0:9999 (Press CTRL+C to quit)
[Knginx1 exited with code 0
api1-1  | INFO:     Shutting down
api2-1  | INFO:     Shutting down
api1-1  | INFO:     Waiting for application shutdown.
api1-1  | INFO:     Application shutdown complete.
api1-1  | INFO:     Finished server process [1]
api1-1  | _GatheringFuture exception was never retrieved
api1-1  | future: <_GatheringFuture finished exception=CancelledError()>
api1-1  | Traceback (most recent call last):
api1-1  |   File "/app/app/worker.py", line 54, in worker
api1-1  |     ok = await process_payment(
api1-1  |          ^^^^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<4 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/app/app/worker.py", line 67, in process_payment
api1-1  |     processor, ok = await post_payment(payload, url, processor, requested_at)
api1-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/app/app/worker.py", line 39, in post_payment
api1-1  |     res = await client.post(
api1-1  |           ^^^^^^^^^^^^^^^^^^
api1-1  |     ...<2 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1859, in post
api1-1  |     return await self.request(
api1-1  |            ^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<13 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
api1-1  |     return await self.send(request, auth=auth, follow_redirects=follow_redirects)
api1-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
api1-1  |     response = await self._send_handling_auth(
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<4 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
api1-1  |     response = await self._send_handling_redirects(
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |     ...<3 lines>...
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
api1-1  |     response = await self._send_single_request(request)
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
api1-1  |     response = await transport.handle_async_request(request)
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
api1-1  |     resp = await self._pool.handle_async_request(req)
api1-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
api1-1  |     raise exc from None
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
api1-1  |     response = await connection.handle_async_request(
api1-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |         pool_request.request
api1-1  |         ^^^^^^^^^^^^^^^^^^^^
api1-1  |     )
api1-1  |     ^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
api1-1  |     return await self._connection.handle_async_request(request)
api1-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
api1-1  |     raise exc
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/http11.py", line 86, in handle_async_request
api1-1  |     await self._send_request_headers(**kwargs)
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/http11.py", line 150, in _send_request_headers
api1-1  |     await self._send_event(event, timeout=timeout)
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/http11.py", line 166, in _send_event
api1-1  |     await self._network_stream.write(bytes_to_send, timeout=timeout)
api1-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_backends/anyio.py", line 50, in write
api1-1  |     await self._stream.send(item=buffer)
api1-1  |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 1283, in send
api1-1  |     await AsyncIOBackend.checkpoint()
api1-1  |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2326, in checkpoint
api1-1  |     await sleep(0)
api1-1  |   File "/usr/local/lib/python3.13/asyncio/tasks.py", line 706, in sleep
api1-1  |     await __sleep0()
api1-1  |   File "/usr/local/lib/python3.13/asyncio/tasks.py", line 700, in __sleep0
api1-1  |     yield
api1-1  | asyncio.exceptions.CancelledError
api2-1  | INFO:     Waiting for application shutdown.
api2-1  | INFO:     Application shutdown complete.
api2-1  | INFO:     Finished server process [1]
api2-1  | _GatheringFuture exception was never retrieved
api2-1  | future: <_GatheringFuture finished exception=CancelledError()>
api2-1  | Traceback (most recent call last):
api2-1  |   File "/app/app/worker.py", line 54, in worker
api2-1  |     ok = await process_payment(
api2-1  |          ^^^^^^^^^^^^^^^^^^^^^^
api2-1  |     ...<4 lines>...
api2-1  |     )
api2-1  |     ^
api2-1  |   File "/app/app/worker.py", line 67, in process_payment
api2-1  |     processor, ok = await post_payment(payload, url, processor, requested_at)
api2-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |   File "/app/app/worker.py", line 39, in post_payment
api2-1  |     res = await client.post(
api2-1  |           ^^^^^^^^^^^^^^^^^^
api2-1  |     ...<2 lines>...
api2-1  |     )
api2-1  |     ^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1859, in post
api2-1  |     return await self.request(
api2-1  |            ^^^^^^^^^^^^^^^^^^^
api2-1  |     ...<13 lines>...
api2-1  |     )
api2-1  |     ^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1540, in request
api2-1  |     return await self.send(request, auth=auth, follow_redirects=follow_redirects)
api2-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1629, in send
api2-1  |     response = await self._send_handling_auth(
api2-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |     ...<4 lines>...
api2-1  |     )
api2-1  |     ^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
api2-1  |     response = await self._send_handling_redirects(
api2-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |     ...<3 lines>...
api2-1  |     )
api2-1  |     ^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
api2-1  |     response = await self._send_single_request(request)
api2-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_client.py", line 1730, in _send_single_request
api2-1  |     response = await transport.handle_async_request(request)
api2-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
api2-1  |     resp = await self._pool.handle_async_request(req)
api2-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
api2-1  |     raise exc from None
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
api2-1  |     response = await connection.handle_async_request(
api2-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |         pool_request.request
api2-1  |         ^^^^^^^^^^^^^^^^^^^^
api2-1  |     )
api2-1  |     ^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
api2-1  |     return await self._connection.handle_async_request(request)
api2-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_async/http11.py", line 72, in handle_async_request
api2-1  |     async with self._state_lock:
api2-1  |                ^^^^^^^^^^^^^^^^
api2-1  |   File "/usr/local/lib/python3.13/site-packages/httpcore/_synchronization.py", line 77, in __aenter__
api2-1  |     await self._anyio_lock.acquire()
api2-1  |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 1799, in acquire
api2-1  |     await AsyncIOBackend.cancel_shielded_checkpoint()
api2-1  |   File "/usr/local/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2350, in cancel_shielded_checkpoint
api2-1  |     await sleep(0)
api2-1  |   File "/usr/local/lib/python3.13/asyncio/tasks.py", line 706, in sleep
api2-1  |     await __sleep0()
api2-1  |   File "/usr/local/lib/python3.13/asyncio/tasks.py", line 700, in __sleep0
api2-1  |     yield
api2-1  | asyncio.exceptions.CancelledError
[Kapi1-1 exited with code 0
[Kapi2-1 exited with code 0
log truncated at line 1000
